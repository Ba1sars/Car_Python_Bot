**ВАЖНО**: проект работает стабильно на версии Python 3.11 - 3.13

# Содержание

1. [Возможности проекта](#title1)
2. [Основные команды](#title2)
3. [Пример использования](#title3)


## <a id = "title1">Возможности проекта</a>
Данный проект позволяет использовать Телеграмм бота в качестве этакой ветрины своего продукта.
Чтоб человек смог выбрать из полученных данных тот, в этом случае, регистратор, который ему подходит по всем параметрам. Можете использовать либо таблицу в формате excel, либо уже готовую БД.


## <a id = "title2">Основные команды</a>
### Установка окружения
Если у вас UNIX-система, то перед началом надо убедиться, что у вас установлен Python 3.12 и выше. Выполните эту команду в вашей консоли:

`python3 -V`

Команда откроет интерактивную python - консоль в вашем терминале либо выдаст ошибку. В случае ошибки надо установить python этой командой:

`apt install python3` или `sudo apt install python3`

Чтобы закрыть интерактивную консоль нужно прописать эту команду:

`exit` либо `quit()`

Далее следует настроить виртуальное окружение (venv) для проекта. Его надо установить командой:

`apt install python3-venv` или `sudo apt install python3-venv`

Теперь надо создать своё виртуальное окружение а общй директории проекта. Это делается данной командой:

`python3 -m venv .venv`, где

- `.venv` - название виртуальной директории. *Можете указать какое угодно*.

После создания виртуального окружения надо его активировать такой командой:

`source .venv/bin/activate`, вместо `.venv` указывайте своё название, если изменили его.

Теперь в консоли должно быть видно название вашего виртуального окружения перед путём к файлам, то есть `(.venv) /имя пользователя/:/путь к файлам/`

В файлах проекта имеется файл с расширением **.toml**. В этом файле уже находятся все необходимые для запуска пакеты. Осталось их только установить. Для начала нужно установить *с активированным виртуальным окружением* библиотеку для работы с .toml файлами. Это делается простой командой:

`pip install toml`

После этого нужно установить утилиту для работы с Makefile. Это делается командой:

`apt install make` или `sudo apt install make`

Далее надо установить файловый менеджер poetry для python. С помощью такой команды:

`pip install poetry`

После всех шагов, можно наконец установить необходимые пакеты командами:

1. `make lock` - которая создаст файл **poetry.lock** со всеми зависимостями

2. `make install` - которая установит зависимости для всех пакетов.

**Теперь проект готов к работе !!!**

### Запуск проекта 
После подготовительных шагов можно приступить и к эксплуатации функционала проекта. В Makefile осталось всего 2 команды - это `parsing` и `bot`.

Чтобы проект запустился необходимо загрузить либо готовую БД в директорию database, либо загрузить файл в эту же директорию с расширением **.xlsx**.

#### База данных

Если загружаете готовую БД, то столбцы там должны быть с названиями: `marque, model, series_with_publish_year, dashcam, photo_link_V1, photo_link_V2, photo_link_V3`. Последними 2 столбцами `photo_link_V2, photo_link_V3` можно принебречь, но хотя бы один столбец с сылками на фотографию должен быть иначе произойдёт ошибка в боте.

Теперь пробежимся по столбцам:

1. `marque` - марка автомобиля
2. `model` - модель автомобиля
3. `series_with_publish_year` - серия автомобиля с его годом выпуска, например, *G 2013 - н.в*
4. `dashcam` - название регистратора
5. `photo_link_V1` - ссылка на фотографию регистратора.
- *Если у вас нет нескольких версий одного регистратора, то оставьте 6 и 7 столбец пустыми, но они **обязательно** должны быть*

#### Excel таблица

С excel таблицой все те же правила, что и с БД, но вы можете называть столбцы как угодно, но их расположение должно соответствовать этому порядку:

1. Марка машины
2. Модель машины
3. Серия и год выпуска
4. Название регистратора
5. Ссылка на 1-ую версию регистратора
6. Ссылка на 2-ую версию регистратора
7. Ссылка на 3-ью версию регистратора

#### Замечание
**Пока что в боте работают такие функции: подбор регистратора, поддержка** (*вывод файлов + перенаправление в чат с поддержкой*), **блок контактов для связи.**

#### Блок подбора видеорегистратора (Finddashcam block)

Основные функции:
- **Автоматически** генерирует все кнопки, так же подтягивает характеристки/названия из созданной БД
- Собирает и обрабатывает выборы пользователя на основе чего подбирает **один** или **несколько** регистраторов из БД
- Просит пользователя продолжить оформление заказа после подбора регистратора, выводя контактные данные компании

**Генерация данных из БД** - это функция, которая позволяет боту с помощью **SQL-запросов** подтягиват данные из БД, для создания кнопок в чате, а так же выводить соответсвтующие **названия/харакетристики/фото** регистраторов.

В качестве **результата подбора** пользователю генерируются *одна* или *несколько* карточек регистраторов, включая *фото/название/характеристики/цену* каждого из них. Для перемещения между **несколькими** вариантами существуют кнопки со стрелочками, а для окончательного выбора одного из вариантов сделана кнопка *Выбрать*.

**После** нажатия кнопки *Выбрать* пользователю выведется карточка регистратора, а так же контактная информация для продолжения оформления заказа

#### Блок поддержки (Support block)

Основные функции:
- Вывод файлов пользователю в чат (с последубщим быстрым доступом к ним)
- Перенаправление в чат с поддержкой

**Вывод файлов** - функция, которая позволяет при нажатии пользователем кнопки с соответсвующем названием получить *файл/видео*, помогающее ему разобраться в его проблеме.То есть без участия тех.поддержки.

**Перенаправление в чат с тех.поддержкой** - функция, которая при нажатии кнопки перенаправит пользователя в отдельный чат *сделанный на базе Create Support Bot* в котором он сможет описать свою проблему и пообщаться с членом тех.поддержки.

#### Блок контактов (Contacts block)

Основные функции:
- Вывести сообщение со всеми возможными способами связаться с компанией

**Единственная функция** - это вывод настраеваемого сообщения в котором все возможные способы связаться с комапанией *Whatsapp/Telegram/Телефонный номер* и/или *веб-сайт компании*.
